<!-- HTML header for doxygen 1.9.1-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" class="dark-mode">
  <head>
    <meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
    <meta http-equiv="X-UA-Compatible" content="IE=9"/>
    <meta name="viewport" content="width=device-width, initial-scale=1"/>
    <meta name="author" content="SXS Collaboration">
    <meta name="generator" content="Doxygen 1.12.0"/>
  <title>fpx.f: flang</title>
  <link href="tabs.css" rel="stylesheet" type="text/css"/>
  <script type="text/javascript" src="jquery.js"></script>
  <script type="text/javascript" src="dynsections.js"></script>
  <script type="text/javascript" src="doxygen-awesome-darkmode-toggle.js"></script>
  <script type="text/javascript" src="doxygen-awesome-fragment-copy-button.js"></script>
  <script type="text/javascript" src="doxygen-awesome-paragraph-link.js"></script>
  <script type="text/javascript" src="doxygen-awesome-interactive-toc.js"></script>
  <script type="text/javascript" src="doxygen-awesome-tabs.js"></script>
  <script type="text/javascript">
      DoxygenAwesomeFragmentCopyButton.init()
      DoxygenAwesomeDarkModeToggle.init()
      DoxygenAwesomeParagraphLink.init()
      DoxygenAwesomeInteractiveToc.init()
      DoxygenAwesomeTabs.init()
  </script>
  <link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
  <link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
  <script type="text/x-mathjax-config">
MathJax.Hub.Config({
  extensions: ["tex2jax.js"],
  jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="./mathjax/MathJax.js"></script>
  <link href="doxygen.css" rel="stylesheet" type="text/css" />
  <link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
  <link rel="stylesheet" href="devibeans.css">
  <script src="highlight.js"></script>
<script>
$(function() {
	hljs.configure({useBR: false});
	$(".fragment").each(function(i,node) {
		$(node).removeClass("fragment");
		hljs.highlightBlock(node);
	});
});
</script>
  </head>
  <body>
  <div id="top"><!-- do not remove this div, it is closed by doxygen! -->
  <div id="titlearea">
    <table cellspacing="0" cellpadding="0">
      <tbody>
        <tr style="height: 56px;">
          <td id="projectlogo"><img alt="Logo" src="logo.png" /></td>
          <td id="projectalign" style="padding-left: 0.5em;">
            <div id="projectname">
              <a href="index.html">fpx.f</a>
            </div>
          </td>
        </tr>
      </tbody>
    </table>
  </div>
  <!-- end header part -->
<!-- Generated by Doxygen 1.12.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('md__c_1_2_users_2dev_2_documents_2_git_hub_2sandbox_2fpx_8f_2_8dox_2articles_2flang.html',''); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">flang</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>The Flang Compiler Fortran Preprocessing « Polymorphic Entities :: Contents :: Procedure Pointer »</p>
<p>Fortran Preprocessing Behavior common to (nearly) all compilers:</p>
<p>Behavior that is not consistent over all extant compilers but which probably should be uncontroversial:</p>
<p>Judgement calls, where precedents are unclear:</p>
<p>Behavior that few compilers properly support (or none), but should:</p>
<p>In short, a Fortran preprocessor should work as if:</p>
<p>Currently implemented built-ins</p>
<p>Non-standard Extensions</p>
<p>Appendix</p>
<p>Behavior common to (nearly) all compilers: Macro and argument names are sensitive to case.</p>
<p>Fixed form right margin clipping after column 72 (or 132) has precedence over macro name recognition, and also over recognition of function-like parentheses and arguments.</p>
<p>Fixed form right margin clipping does not apply to directive lines.</p>
<p>Macro names are not recognized as such when spaces are inserted into their invocations in fixed form. This includes spaces at the ends of lines that have been clipped at column 72 (or whatever).</p>
<p>Text is rescanned after expansion of macros and arguments.</p>
<p>Macros are not expanded within quoted character literals or quoted FORMAT edit descriptors.</p>
<p>Macro expansion occurs before any effective token pasting via fixed form space removal.</p>
<p>C-like line continuations with backslash-newline are allowed in directives, including the definitions of macro bodies.</p>
<p>/* Old style C comments */ are ignored in directives and removed from the bodies of macro definitions.</p>
<p>// New style C comments are not removed, since Fortran has OPERATOR(//).</p>
<p>C-like line continuations with backslash-newline can appear in old-style C comments in directives.</p>
<p>After define FALSE TRUE, .FALSE. is replaced by .TRUE.; i.e., tokenization does not hide the names of operators or logical constants.</p>
<p>define KWM c allows the use of KWM in column 1 as a fixed form comment line indicator.</p>
<p>A define directive intermixed with continuation lines can’t define a macro that’s invoked earlier in the same continued statement.</p>
<p>Behavior that is not consistent over all extant compilers but which probably should be uncontroversial: Invoked macro names can straddle a Fortran line continuation.</p>
<p>… unless implicit fixed form card padding intervenes; i.e., in fixed form, a continued macro name has to be split at column 72 (or 132).</p>
<p>Comment lines may appear with continuations in a split macro names.</p>
<p>Function-like macro invocations can straddle a Fortran fixed form line continuation between the name and the left parenthesis, and comment and directive lines can be there too.</p>
<p>Function-like macro invocations can straddle a Fortran fixed form line continuation between the parentheses, and comment lines can be there too.</p>
<p>Macros are not expanded within Hollerith constants or Hollerith FORMAT edit descriptors.</p>
<p>Token pasting with ## works in function-like macros.</p>
<p>Argument stringization with # works in function-like macros.</p>
<p>Directives can be capitalized (e.g., DEFINE) in fixed form.</p>
<p>Fixed form clipping after column 72 or 132 is done before macro expansion, not after.</p>
<p>C-like line continuation with backslash-newline can appear in the name of a keyword-like macro definition.</p>
<p>If # is in column 6 in fixed form, it’s a continuation marker, not a directive indicator.</p>
<p>define KWM ! allows KWM to signal a comment.</p>
<p>Judgement calls, where precedents are unclear: Expressions in if and elif should support both Fortran and C operators; e.g., if 2 .LT. 3 should work.</p>
<p>If a function-like macro does not close its parentheses, line continuation should be assumed. This includes the case of a keyword-like macro that expands to the name of a function-like macro.</p>
<p>… However, the leading parenthesis has to be on the same line as the name of the function-like macro, or on a continuation line thereof.</p>
<p>And no macro definition prior to that point can be allowed to have unbalanced parentheses in its replacement text. When that happens, it’s possible to have false positive cases causing implicit line continuations that break real code.</p>
<p>If macros expand to text containing &amp;, it doesn’t work as a free form line continuation marker.</p>
<p>define c 1 does not allow a c in column 1 to be used as a label in fixed form, rather than as a comment line indicator.</p>
<p>IBM claims to be ISO C compliant and therefore recognizes trigraph sequences.</p>
<p>Fortran comments in macro actual arguments should be respected, on the principle that a macro call should work like a function reference.</p>
<p>If a define or undef directive appears among continuation lines, it may or may not affect text in the continued statement that appeared before the directive.</p>
<p>A backslash at the end of a free form source line is a continuation marker, with no space skipping or special handling of a leading &amp; on the next line.</p>
<p>Behavior that few compilers properly support (or none), but should: A macro invocation can straddle free form continuation lines in all of their forms, with continuation allowed in the name, before the arguments, and within the arguments.</p>
<p>Directives can be capitalized in free form, too.</p>
<p><b>VA_ARGS</b> and <b>VA_OPT</b> work in variadic function-like macros.</p>
<p>In short, a Fortran preprocessor should work as if: Fixed form lines are padded up to column 72 (or 132) and clipped thereafter.</p>
<p>Fortran comments are removed.</p>
<p>C-style line continuations are processed in preprocessing directives.</p>
<p>C old-style comments are removed from directives.</p>
<p>Fortran line continuations are processed (outside preprocessing directives). Line continuation rules depend on source form. Comment lines that are enabled compiler directives have their line continuations processed. Conditional compilation preprocessing directives (e.g., if) may be appear among continuation lines, and have their usual effects upon them.</p>
<p>Other preprocessing directives are processed and macros expanded. Along the way, Fortran INCLUDE lines and preprocessor include directives are expanded, and all these steps applied recursively to the introduced text.</p>
<p>Any Fortran comments created by macro replacement are removed.</p>
<p>Steps 5 and 6 are interleaved with respect to the preprocessing state. Conditional compilation preprocessing directives always reflect only the macro definition state produced by the active define and undef preprocessing directives that precede them.</p>
<p>If the source form is changed by means of a compiler directive (i.e., !DIR$ FIXED or FREE) in an included source file, its effects cease at the end of that file.</p>
<p>Last, if the preprocessor is not integrated into the Fortran compiler, new Fortran continuation line markers should be introduced into the final text.</p>
<p>OpenMP-style directives that look like comments are not addressed by this scheme but are obvious extensions.</p>
<p>Currently implemented built-ins <b>DATE</b>: Date, given as e.g. “Jun 16 1904”</p>
<p><b>TIME</b>: Time in 24-hour format including seconds, e.g. “09:24:13”</p>
<p><b>TIMESTAMP</b>: Date, time and year of last modification, given as e.g. “Fri May 9 09:16:17 2025”</p>
<p><b>FILE</b>: Current file</p>
<p><b>LINE</b>: Current line</p>
<p>Non-standard Extensions <b>COUNTER</b>: Replaced by sequential integers on each expansion, starting from 0.</p>
<p>Appendix N in the table below means “not supported”; this doesn’t mean a bug, it just means that a particular behavior was not observed. E signifies “error reported”.</p>
<p>The abbreviation KWM stands for “keyword macro” and FLM means “function-like macro”.</p>
<p>The first block of tests (pp0*.F) are all fixed-form source files; the second block (pp1*.F90) are free-form source files.</p>
<p>f18 | pgfortran | | ifort | | | gfortran | | | | xlf | | | | | nagfor | | | | | | . . . . . . pp001.F keyword macros . . . . . . pp002.F undef . . . . . . pp003.F function-like macros . . . . . . pp004.F KWMs case-sensitive . N . N N . pp005.F KWM split across continuation, implicit padding . N . N N . pp006.F ditto, but with intervening <em>comment line N N N N N N pp007.F KWM split across continuation, clipped after column 72 . . . . . . pp008.F KWM with spaces in name at invocation NOT replaced . N . N N . pp009.F FLM call split across continuation, implicit padding . N . N N . pp010.F ditto, but with intervening *comment line N N N N N N pp011.F FLM call name split across continuation, clipped . N . N N . pp012.F FLM call name split across continuation . E . N N . pp013.F FLM call split between name and ( . N . N N . pp014.F FLM call split between name and (, with intervening *comment . E . N N . pp015.F FLM call split between name and (, clipped . E . N N . pp016.F FLM call split between name and ( and in argument . . . . . . pp017.F KLM rescan . . . . . . pp018.F KLM rescan with undef (so rescan is after expansion) . . . . . . pp019.F FLM rescan . . . . . . pp020.F FLM expansion of argument . . . . . . pp021.F KWM NOT expanded in 'literal' . . . . . . pp022.F KWM NOT expanded in "literal" . . E E . E pp023.F KWM NOT expanded in 9HHOLLERITH literal . . . E . . pp024.F KWM NOT expanded in Hollerith in FORMAT . . . . . . pp025.F KWM expansion is before token pasting due to fixed-form space removal . . . E . E pp026.F ## token pasting works in FLM E . . E E . pp027.F DEFINE works in fixed form . N . N N . pp028.F fixed-form clipping done before KWM expansion on source line . . . . . . pp029.F \ newline allowed in define . . . . . . pp030.F /</em> C comment */ erased from define E E E E E E pp031.F // C++ comment NOT erased from define . . . . . . pp032.F /* C comment */ \ newline erased from define . . . . . . pp033.F /* C comment \ newline */ erased from define . . . . . N pp034.F \ newline allowed in name on KWM definition . E . E E . pp035.F if 2 .LT. 3 works . . . . . . pp036.F define FALSE TRUE ... .FALSE. -&gt; .TRUE. N N N N N N pp037.F fixed-form clipping NOT applied to define . . E . E E pp038.F FLM call with closing ')' on next line (not a continuation) E . E . E E pp039.F FLM call with '(' on next line (not a continuation) . . . . . . pp040.F define KWM c, then KWM works as comment line initiator E . E . . E pp041.F use KWM expansion as continuation indicators N N N . . N pp042.F define c 1, then use c as label in fixed-form . . . . N . pp043.F define with # in column 6 is a continuation line in fixed-form E . . . . . pp044.F define directive amid continuations . . . . . . pp101.F90 keyword macros . . . . . . pp102.F90 undef . . . . . . pp103.F90 function-like macros . . . . . . pp104.F90 KWMs case-sensitive . N N N N N pp105.F90 KWM call name split across continuation, with leading &amp; . N N N N N pp106.F90 ditto, with &amp; ! comment N N E E N . pp107.F90 KWM call name split across continuation, no leading &amp;, with &amp; ! comment N N E E N . pp108.F90 ditto, but without &amp; ! comment . N N N N N pp109.F90 FLM call name split with leading &amp; . N N N N N pp110.F90 ditto, with &amp; ! comment N N E E N . pp111.F90 FLM call name split across continuation, no leading &amp;, with &amp; ! comment N N E E N . pp112.F90 ditto, but without &amp; ! comment . N N N N E pp113.F90 FLM call split across continuation between name and (, leading &amp; . N N N N E pp114.F90 ditto, with &amp; ! comment, leading &amp; N N N N N . pp115.F90 ditto, with &amp; ! comment, no leading &amp; N N N N N . pp116.F90 FLM call split between name and (, no leading &amp; . . . . . . pp117.F90 KWM rescan . . . . . . pp118.F90 KWM rescan with undef, proving rescan after expansion . . . . . . pp119.F90 FLM rescan . . . . . . pp120.F90 FLM expansion of argument . . . . . . pp121.F90 KWM NOT expanded in 'literal' . . . . . . pp122.F90 KWM NOT expanded in "literal" . . E E . E pp123.F90 KWM NOT expanded in Hollerith literal . . E E . E pp124.F90 KWM NOT expanded in Hollerith in FORMAT E . . E E . pp125.F90 DEFINE works in free form . . . . . . pp126.F90 \ newline works in define . . E . E E pp127.F90 FLM call with closing ')' on next line (not a continuation) E . E . E E pp128.F90 FLM call with '(' on next line (not a continuation) . . N . . N pp129.F90 define KWM !, then KWM works as comment line initiator . . E . . E pp130.F90 define KWM &amp;, use for continuation w/o pasting (ifort and nag seem to continue define) « Polymorphic Entities :: Contents :: Procedure Pointer »</p>
<p>© Copyright 2017-2025, The Flang Team. Last updated on Jun 19, 2025. Created using Sphinx 7.2.6. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.9.1-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">
    &copy; Copyright 2017 - 2024
    <a href="LICENSE.txt" target="_blank">
    <span class="hidden-xs">Distributed under the</span>
    MIT License</a>
  </ul>
</div>
</body>
</html>
