<!-- HTML header for doxygen 1.9.1-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" class="dark-mode">
  <head>
    <meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
    <meta http-equiv="X-UA-Compatible" content="IE=9"/>
    <meta name="viewport" content="width=device-width, initial-scale=1"/>
    <meta name="author" content="SXS Collaboration">
    <meta name="generator" content="Doxygen 1.12.0"/>
  <title>fpx.f: Include</title>
  <link href="tabs.css" rel="stylesheet" type="text/css"/>
  <script type="text/javascript" src="jquery.js"></script>
  <script type="text/javascript" src="dynsections.js"></script>
  <script type="text/javascript" src="doxygen-awesome-darkmode-toggle.js"></script>
  <script type="text/javascript" src="doxygen-awesome-fragment-copy-button.js"></script>
  <script type="text/javascript" src="doxygen-awesome-paragraph-link.js"></script>
  <script type="text/javascript" src="doxygen-awesome-interactive-toc.js"></script>
  <script type="text/javascript" src="doxygen-awesome-tabs.js"></script>
  <script type="text/javascript">
      DoxygenAwesomeFragmentCopyButton.init()
      DoxygenAwesomeDarkModeToggle.init()
      DoxygenAwesomeParagraphLink.init()
      DoxygenAwesomeInteractiveToc.init()
      DoxygenAwesomeTabs.init()
  </script>
  <link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
  <link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
  <script type="text/x-mathjax-config">
MathJax.Hub.Config({
  extensions: ["tex2jax.js"],
  jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/MathJax.js"></script>
  <link href="doxygen.css" rel="stylesheet" type="text/css" />
  <link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<script>
$(function() {
	hljs.configure({useBR: false});
	$(".fragment").each(function(i,node) {
		$(node).removeClass("fragment");
		hljs.highlightBlock(node);
	});
});
</script>
  </head>
  <body>
  <div id="top"><!-- do not remove this div, it is closed by doxygen! -->
  <div id="titlearea">
    <table cellspacing="0" cellpadding="0">
      <tbody>
        <tr style="height: 56px;">
          <td id="projectlogo"><img alt="Logo" src="logo.png" /></td>
          <td id="projectalign" style="padding-left: 0.5em;">
            <div id="projectname">
              <a href="index.html">fpx.f</a>
            </div>
          </td>
        </tr>
      </tbody>
    </table>
  </div>
  <!-- end header part -->
<!-- Generated by Doxygen 1.12.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('group__group__include.html',''); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Types</a>  </div>
  <div class="headertitle"><div class="title">Include</div></div>
</div><!--header-->
<div class="contents">
<a name="details" id="details"></a><h2 class="groupheader">Definition</h2>
<p>Include file handling and resolution for the fpx Fortran preprocessor </p>
<p>This module implements robust and standard-compliant processing of <code>#include</code> directives with full support for:</p><ul>
<li>Both forms: <code>#include "file.h"</code> (local/user) and <code>#include &lt;file.h&gt;</code> (system)</li>
<li>Proper search order: quotes search source dir first, angle brackets skip source dir</li>
<li>Relative paths resolved against the directory of the parent source file</li>
<li>Search in user-defined include directories (<code>globalincludedir</code>)</li>
<li>Search in system PATH environment variable directories</li>
<li>Fallback to current working directory</li>
<li>Proper error reporting with file name and line number context</li>
<li>Recursion safety through integration with the main preprocessor loop</li>
<li>Seamless integration via the abstract <code>preprocess</code> procedure pointer</li>
</ul>
<p>The routine correctly strips quotes or angle brackets, performs path resolution, checks file existence, opens the file, and recursively invokes the main preprocessing engine on the included content using the same macro environment.</p>
<h2 class="groupheader">Search Order</h2>
<p>For <code>#include "file"</code>:</p><ol type="1">
<li>Directory of the parent source file</li>
<li>Directories specified by -I or -Y options (globalincludedir)</li>
<li>Directories in INCLUDE environment variable</li>
<li>Current working directory</li>
</ol>
<p>For <code>#include &lt;file&gt;</code>:</p><ol type="1">
<li>Directories specified by -I or -Y options (globalincludedir)</li>
<li>Directories in INCLUDE environment variable</li>
<li>Current working directory</li>
</ol>
<h2 class="groupheader">Examples</h2>
<ol type="1">
<li>Include a local header from the same directory using quotes: <div class="fragment"><div class="line"><span class="preprocessor">#include </span></div>
<div class="line"><span class="preprocessor"></span><span class="comment">!&gt; fpx will look for ./config.h relative to the current source file first</span></div>
</div><!-- fragment --></li>
<li>Include a system header using angle brackets: <div class="fragment"><div class="line"><span class="preprocessor">#include &lt;stdlib.h&gt;</span></div>
<div class="line"><span class="preprocessor"></span><span class="comment">!&gt; fpx will skip the source directory and search -I paths, then PATH</span></div>
</div><!-- fragment --></li>
<li>Using from the driver program (adding include paths): <div class="fragment"><div class="line">global%includedir = [<span class="stringliteral">&#39;/usr/include&#39;</span>, <span class="stringliteral">&#39;./include&#39;</span>, <span class="stringliteral">&#39;./headers&#39;</span>]</div>
<div class="line"><span class="keyword">call </span>preprocess(<span class="stringliteral">&#39;main.F90&#39;</span>, <span class="stringliteral">&#39;main.f90&#39;</span>)<span class="comment"></span></div>
<div class="line"><span class="comment">!&gt; All #include &lt;...&gt; will search these directories in order</span></div>
</div><!-- fragment --></li>
<li>Verbose error reporting when a file is not found: <div class="fragment"><div class="line">$ fpx -v src/utils.F90</div>
<div class="line">Error: Cannot find include file <span class="stringliteral">&#39;missing.h&#39;</span> at src/utils.F90:27</div>
</div><!-- fragment --> </li>
</ol>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="nested-classes" name="nested-classes"></a>
Data Types</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">interface &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="interfacefpx__include_1_1read__unit.html">read_unit</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Abstract interface for the main preprocessing routine (used for recursion) Allows handle_include to recursively call the top-level preprocess_unit routine without creating circular module dependencies.  <a href="interfacefpx__include_1_1read__unit.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Methods</h2>
<a id="gab85fc44adeb3b7f5e98cbd402427585f" name="gab85fc44adeb3b7f5e98cbd402427585f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gab85fc44adeb3b7f5e98cbd402427585f">&#9670;&#160;</a></span>get_system_paths()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">character(:) function, dimension(:), allocatable get_system_paths</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Get system include paths from PATH environment variable Returns an array of directory paths found in PATH. </p>
<dl class="section return"><dt>Returns</dt><dd>Array of path strings, empty if PATH not set</dd></dl>
<p><b>Remarks</b> </p>

<p class="definition">Definition at line <a class="el" href="include_8f90_source.html#l00238">238</a> of file <a class="el" href="include_8f90_source.html">include.f90</a>.</p>

</div>
</div>
<a id="ga1919a8ed1d71c0e7b0881c6512cbadef" name="ga1919a8ed1d71c0e7b0881c6512cbadef"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga1919a8ed1d71c0e7b0881c6512cbadef">&#9670;&#160;</a></span>handle_include()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">recursive subroutine, public handle_include </td>
          <td>(</td>
          <td class="paramtype">character(*), intent(in)</td>          <td class="paramname"><span class="paramname"><em>input</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(in)</td>          <td class="paramname"><span class="paramname"><em>ounit</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">character(*), intent(in)</td>          <td class="paramname"><span class="paramname"><em>parent_file</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(in)</td>          <td class="paramname"><span class="paramname"><em>iline</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">procedure(<a class="el" href="interfacefpx__include_1_1read__unit.html">read_unit</a>)</td>          <td class="paramname"><span class="paramname"><em>preprocess</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">type(<a class="el" href="structfpx__macro_1_1macro.html">macro</a>), dimension(:), intent(inout), allocatable</td>          <td class="paramname"><span class="paramname"><em>macros</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">character(*), intent(in)</td>          <td class="paramname"><span class="paramname"><em>token</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Process a include directive encountered during preprocessing Resolves the include file name (quoted or angle-bracketed), searches for the file using standard C preprocessor rules: </p>
<ul>
<li>Quoted includes search: parent directory, -I paths, PATH, cwd</li>
<li>Angle bracket includes search: -I paths, PATH, cwd (skips parent directory) Opens the file and recursively preprocesses its contents into the output unit.</li>
</ul>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">input</td><td>Full line containing the include directive </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">ounit</td><td>Output unit where preprocessed content is written </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">parent_file</td><td>Path of the file containing the include </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">iline</td><td>Line number in parent file (for error messages) </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">preprocess</td><td>Procedure pointer to the main line-by-line preprocessor </td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">macros</td><td>Current macro table (shared across recursion levels) </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">token</td><td>Usually 'INCLUDE' â€“ the directive keyword</td></tr>
  </table>
  </dd>
</dl>
<p><b>Remarks</b> </p>

<p class="definition">Definition at line <a class="el" href="include_8f90_source.html#l00117">117</a> of file <a class="el" href="include_8f90_source.html">include.f90</a>.</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.9.1-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">
    &copy; Copyright 2017 - 2024
    <a href="LICENSE.txt" target="_blank">
    <span class="hidden-xs">Distributed under the</span>
    MIT License</a>
  </ul>
</div>
</body>
</html>
