<!-- HTML header for doxygen 1.9.1-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" class="dark-mode">
  <head>
    <meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
    <meta http-equiv="X-UA-Compatible" content="IE=9"/>
    <meta name="viewport" content="width=device-width, initial-scale=1"/>
    <meta name="author" content="SXS Collaboration">
    <meta name="generator" content="Doxygen 1.12.0"/>
  <title>fpx.f: Tips &amp; Tricks</title>
  <link href="tabs.css" rel="stylesheet" type="text/css"/>
  <script type="text/javascript" src="jquery.js"></script>
  <script type="text/javascript" src="dynsections.js"></script>
  <script type="text/javascript" src="doxygen-awesome-darkmode-toggle.js"></script>
  <script type="text/javascript" src="doxygen-awesome-fragment-copy-button.js"></script>
  <script type="text/javascript" src="doxygen-awesome-paragraph-link.js"></script>
  <script type="text/javascript" src="doxygen-awesome-interactive-toc.js"></script>
  <script type="text/javascript" src="doxygen-awesome-tabs.js"></script>
  <script type="text/javascript">
      DoxygenAwesomeFragmentCopyButton.init()
      DoxygenAwesomeDarkModeToggle.init()
      DoxygenAwesomeParagraphLink.init()
      DoxygenAwesomeInteractiveToc.init()
      DoxygenAwesomeTabs.init()
  </script>
  <link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
  <link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
  <script type="text/x-mathjax-config">
MathJax.Hub.Config({
  extensions: ["tex2jax.js"],
  jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/MathJax.js"></script>
  <link href="doxygen.css" rel="stylesheet" type="text/css" />
  <link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<script>
$(function() {
	hljs.configure({useBR: false});
	$(".fragment").each(function(i,node) {
		$(node).removeClass("fragment");
		hljs.highlightBlock(node);
	});
});
</script>
  </head>
  <body>
  <div id="top"><!-- do not remove this div, it is closed by doxygen! -->
  <div id="titlearea">
    <table cellspacing="0" cellpadding="0">
      <tbody>
        <tr style="height: 56px;">
          <td id="projectlogo"><img alt="Logo" src="logo.png" /></td>
          <td id="projectalign" style="padding-left: 0.5em;">
            <div id="projectname">
              <a href="index.html">fpx.f</a>
            </div>
          </td>
        </tr>
      </tbody>
    </table>
  </div>
  <!-- end header part -->
<!-- Generated by Doxygen 1.12.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('integration.html',''); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Tips &amp; Tricks</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="md__c_1_2_users_2_david_pfister_2_git_hub_2sandbox_2fpx_8f_2_8dox_2articles_2integration"></a></p>
<p>This section is providing hints (some may call it hacks) to substitute classical preprocessors like Intel fpp or GNU cpp with fpx. These pieces of information are extracted from different sources and collected here for convenience. May this be useful to anyone willing to try.</p>
<h1><a class="anchor" id="autotoc_md7"></a>
fpp</h1>
<h2><a class="anchor" id="autotoc_md8"></a>
fpp-name</h2>
<p>The <a href="https://www.intel.com/content/www/us/en/docs/fortran-compiler/developer-guide-reference/2023-0/fpp-name.html">fpp-name</a> Lets you specify an alternate preprocessor to use with Fortran.</p>
<p><b>Syntax</b> </p><table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadLeft"></th><th class="markdownTableHeadRight"></th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">Linux   </td><td class="markdownTableBodyRight">-fpp-name=name    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft">macOS   </td><td class="markdownTableBodyRight">-fpp-name=name    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">Windows   </td><td class="markdownTableBodyRight">/fpp-name:name   </td></tr>
</table>
<p><b>Arguments</b> name Is the name of the preprocessor executable. It can include a path. See the description below for more details.</p>
<p><b>Default</b> OFF No preprocessor is run on files before compilation.</p>
<p><b>Description</b> This option lets you specify an alternate preprocessor to use with Fortran.</p>
<p>The compiler invokes the user-specified Fortran preprocessor by spawning a command with the following signature: </p><div class="fragment"><div class="line">alt_fpp @fpp.arg </div>
</div><!-- fragment --><p> where alt_fpp is the name of the Fortran preprocessor you want to use, and fpp.arg is an input file containing the preprocessor's command line arguments.</p>
<p>fpp.arg is generated by the Fortran compiler driver, and contains the -D&lt;define&gt;, -I&lt;include directory&gt;, and input file names from the compiler command line. Compiler predefined options -D&lt;define&gt; and -I&lt;include directory&gt; are also included. Output from the preprocessor goes to STDOUT and will be captured for any further processing.</p>
<p>You can use option Qoption,fpp,… to pass other definitions (using -D&lt;define&gt;), include directories (using -I&lt;include directory&gt;), or other options accepted by the preprocessor.</p>
<p>You can use option Qlocation, fpp,… to specify a directory for supporting tools.</p>
<h2><a class="anchor" id="autotoc_md9"></a>
Known issues</h2>
<ul>
<li><a href="https://github.com/aradi/fypp/issues/24">link</a></li>
</ul>
<blockquote class="doxtable">
<p>&zwj;The Intel compilers provide a flag <code>-fpp-name=&lt;name&gt;</code> which can be used to specify an alternative preprocessor of the form:</p>
<p>alt_fpp [ [–D&lt;define&gt;]..] [[-I&lt;include directory&gt;]..] inputfile which prints output to STDOUT that will get captured by the compiler for further processing.</p>
<p>I've tried to use this with fypp, but I run into errors: </p><div class="fragment"><div class="line">$ ifx -fpp-name=`which fypp` -DNAME=\&quot;Ivan\&quot; fypp_example.F90 </div>
<div class="line">error: Failed to open file &#39;@/tmp/ifxargBf8BjW&#39; for read [FyppFatalError]</div>
<div class="line">error: [Errno 2] No such file or directory: &#39;@/tmp/ifxargBf8BjW&#39; [FileNotFoundError]</div>
</div><!-- fragment --> <div class="fragment"><div class="line">$ ifx -fpp-name=fypp -Qlocation,fpp,/home/ivan/.local/bin -DNAME=\&quot;Ivan\&quot; fypp_example.F90 </div>
<div class="line">error: Failed to open file &#39;@/tmp/ifxarg6DL4Me&#39; for read [FyppFatalError]</div>
<div class="line">error: [Errno 2] No such file or directory: &#39;@/tmp/ifxarg6DL4Me&#39; [FileNotFoundError]</div>
</div><!-- fragment --><p> It seems like the compiler prepends @ to the path, but otherwise it seems it could work. If you'd like to experiment, here is the toy code: </p><div class="fragment"><div class="line">! fypp_example.F90</div>
<div class="line">#:def hello(name)</div>
<div class="line">print *, &quot;Hello ${name}$&quot;</div>
<div class="line">#:enddef</div>
<div class="line"> </div>
<div class="line">#:if defined(&#39;NAME&#39;)</div>
<div class="line">$:hello(NAME)</div>
<div class="line">#:else</div>
<div class="line">print *, &quot;Hello World&quot;</div>
<div class="line">#:endif</div>
<div class="line">end</div>
</div><!-- fragment --> </blockquote>
<h1><a class="anchor" id="autotoc_md10"></a>
cpp</h1>
<p>This answer from Jim Dempsey is taken from the <a href="https://community.intel.com/t5/Intel-Fortran-Compiler/ifort-preprocessor-and-variadic-macros/td-p/832383">intel forum</a> </p><blockquote class="doxtable">
<p>&zwj;You could experiment with shell piping gcc preprocessor in front of (or in place of) fpp.</p>
<p>In your development environment, insert in PATH, in front of other paths, a path to a GCChack folder containing a copy of the GCC preprocessor renamed to FPP.EXE. This assumes the GCC preprocessor can completely preprocess the source. This can also be a shell <code>program &gt; youwrite</code> that handles the shell call to GCC then to FPP.</p>
<p><b>Plan B</b> is to create a batch file that first runs the GCC preprocessor, then runs the FPP preprocessor. Place the batch file into the "hack" folder under the name "FPP.EXE". Windows will (has for me) examine the contents of the start of the file and determine it is a batch file.</p>
<p><b>Plan C</b> is to create pre-build events and actions to pre-pre-process the files using the GCC pre-processor. </p>
</blockquote>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.9.1-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="pages.html">Documentation</a></li>
    <li class="footer">
    &copy; Copyright 2017 - 2024
    <a href="LICENSE.txt" target="_blank">
    <span class="hidden-xs">Distributed under the</span>
    MIT License</a>
  </ul>
</div>
</body>
</html>
